'use client'

import { useState } from 'react'
import styles from './keyCode.module.css'
import { FaX } from 'react-icons/fa6'

export default function KeyCode() {

    const keys = ['1', '2', '3', '4', '5','6', '7', '8', '9', 'clr', '0', '⌫']
    const [code, setCode] = useState<string>('')
    const [showDetails, setShowDetails] = useState(false)

    function handleKeyPress(key: string) {

        if (key === 'clr') {
            setCode('')
            return
        }

        if (key === '⌫') {
            setCode(prev => prev.slice(0, -1))
        return
        }

        if (code.length > 4 ){
            setShowDetails(true)
        }

        if (code.length >= 6) return

        setCode(prev => prev + key)
    }


    return (
        <div className={styles.container}>
            <svg width="69" height="69" viewBox="0 0 69 69" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M67.418 47.4165C67.418 36.3708 58.4637 27.4165 47.418 27.4165C36.3723 27.4165 27.418 36.3708 27.418 47.4165C27.418 58.4622 36.3723 67.4165 47.418 67.4165C58.4637 67.4165 67.418 58.4622 67.418 47.4165Z" stroke="#003883" strokeWidth="1.5"/>
                <path d="M40.75 49.6389C40.75 49.6389 42.8333 49.6389 44.9167 54.0833C44.9167 54.0833 51.5343 42.9722 57.4167 40.75" stroke="#003883" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
                <path d="M5.75 32.7436L6.125 32.0941H6.125L5.75 32.7436ZM2.08975 29.0833L1.44023 29.4583H1.44023L2.08975 29.0833ZM62.4167 2.08975L62.0417 2.73926V2.73927L62.4167 2.08975ZM66.0769 5.75L66.7264 5.375V5.375L66.0769 5.75ZM5.75 2.08975L6.125 2.73926H6.125L5.75 2.08975ZM2.08975 5.75L2.73926 6.125V6.125L2.08975 5.75ZM66.4862 24.8189C66.4457 25.2312 66.7471 25.5982 67.1593 25.6386C67.5716 25.6791 67.9385 25.3777 67.979 24.9655L67.2326 24.8922L66.4862 24.8189ZM20.5351 34.8333C20.9493 34.8333 21.2851 34.4975 21.2851 34.0833C21.2851 33.6691 20.9493 33.3333 20.5351 33.3333V34.0833V34.8333ZM17.4167 0.75V1.5H50.75V0.75V0H17.4167V0.75ZM17.4167 34.0833V33.3333C14.2875 33.3333 11.9907 33.3326 10.1847 33.1689C8.38894 33.0062 7.15208 32.6871 6.125 32.0941L5.75 32.7436L5.375 33.3931C6.66843 34.1399 8.14951 34.4906 10.0493 34.6628C11.9388 34.834 14.3151 34.8333 17.4167 34.8333V34.0833ZM0.75 17.4167H0C0 20.5182 -0.000718534 22.8946 0.17053 24.784C0.342713 26.6838 0.693465 28.1649 1.44023 29.4583L2.08975 29.0833L2.73926 28.7083C2.14628 27.6813 1.82716 26.4444 1.66441 24.6487C1.50072 22.8426 1.5 20.5459 1.5 17.4167H0.75ZM5.75 32.7436L6.125 32.0941C4.71882 31.2822 3.55112 30.1145 2.73926 28.7083L2.08975 29.0833L1.44023 29.4583C2.38374 31.0925 3.74079 32.4496 5.375 33.3931L5.75 32.7436ZM50.75 0.75V1.5C53.8792 1.5 56.1759 1.50072 57.982 1.66441C59.7777 1.82716 61.0146 2.14628 62.0417 2.73926L62.4167 2.08975L62.7917 1.44023C61.4982 0.693465 60.0172 0.342713 58.1174 0.17053C56.2279 -0.000718534 53.8516 0 50.75 0V0.75ZM67.4167 17.4167H68.1667C68.1667 14.3151 68.1674 11.9388 67.9961 10.0493C67.824 8.14951 67.4732 6.66843 66.7264 5.375L66.0769 5.75L65.4274 6.125C66.0204 7.15208 66.3395 8.38894 66.5023 10.1847C66.6659 11.9907 66.6667 14.2875 66.6667 17.4167H67.4167ZM62.4167 2.08975L62.0417 2.73927C63.4478 3.55112 64.6155 4.71882 65.4274 6.125L66.0769 5.75L66.7264 5.375C65.7829 3.74079 64.4259 2.38374 62.7917 1.44023L62.4167 2.08975ZM17.4167 0.75V0C14.3151 0 11.9388 -0.000718534 10.0493 0.17053C8.14951 0.342713 6.66843 0.693465 5.375 1.44023L5.75 2.08975L6.125 2.73926C7.15208 2.14628 8.38894 1.82716 10.1847 1.66441C11.9907 1.50072 14.2875 1.5 17.4167 1.5V0.75ZM0.75 17.4167H1.5C1.5 14.2875 1.50072 11.9907 1.66441 10.1847C1.82716 8.38894 2.14628 7.15208 2.73926 6.125L2.08975 5.75L1.44023 5.375C0.693465 6.66843 0.342713 8.14951 0.17053 10.0493C-0.000718534 11.9388 0 14.3151 0 17.4167H0.75ZM5.75 2.08975L5.375 1.44023C3.74079 2.38374 2.38374 3.74079 1.44023 5.375L2.08975 5.75L2.73926 6.125C3.55112 4.71882 4.71882 3.55112 6.125 2.73926L5.75 2.08975ZM67.4167 17.4167H66.6667C66.6667 20.6469 66.6658 22.9892 66.4862 24.8189L67.2326 24.8922L67.979 24.9655C68.1675 23.0454 68.1667 20.6165 68.1667 17.4167H67.4167ZM20.5351 34.0833V33.3333H17.4167V34.0833V34.8333H20.5351V34.0833Z" fill="#003883"/>
                <path d="M50.75 17.4165H50.7799" stroke="#003883" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                <path d="M34.084 17.4165H34.1139" stroke="#003883" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                <path d="M17.418 17.4165H17.4479" stroke="#003883" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>

            <p className= {styles.instruction}>Enter the Visitor's 6-digit entry code</p>

            <div className={styles.circleContainer}>
                {[...Array(6)].map((_, index) => (
                    <div 
                        key={index}
                        className={`${styles.circle} ${
                            index < code.length ? styles.filled : ''
                        }`}
                    />
                ))}
            </div>

            <div className={styles.keypad}>
                {keys.map((key) => (
                    <button
                        key={key}
                        onClick={() => handleKeyPress(key)}
                        className={styles.key}
                    >
                        {key}
                    </button>
                ))}
            </div>

            {/* {
                showDetails && 
                <div className= {styles.codeModal}>
                    <div className= {styles.details}>
                <button className= {styles.close} onClick={()=>{setShowDetails(false)}}>
                    Close <FaX size={10}/>
                </button>
                
                <div className={styles.infoBox}>
                    <h3>Visit Details</h3>
                    <div className={styles.info}>
                        <p>Visitor’s Name:</p>
                        <h4>Taiwo Adebayo</h4>
                    </div>
                    <div className={styles.info}>
                        <p>Household Name:</p>
                        <h4>Johnson Peace</h4>
                    </div>
                    <div className={styles.info}>
                        <p>Purpose of Visit:</p>
                        <h4>Artisan / Repairs</h4>
                    </div>
                    <div className={styles.info}>
                        <p>Date:</p>
                        <h4>26/01/2026</h4>
                    </div>
                    <div className={styles.info}>
                        <p>Duration of Visit:</p>
                        <h4>1:00pm - 3:00pm</h4>
                    </div>
                    <div className={styles.info}>
                        <p>Location of Visit:</p>
                        <h4>Block 12b</h4>
                    </div>
                    <div className={styles.info}>
                        <p>Status:</p>
                        <h4 className={
                            status === 'expected'
                            ? styles.expected
                            : status === 'pending'
                            ? styles.denied
                            : styles.checked
                        }></h4>
                    </div>
                    <div className={styles.info}>
                        <p>Carry-ons:</p>
                        <h4>Gearbox, Carburetor</h4>
                    </div>
                    <div className={styles.info}>
                        <p>Notes:</p>
                        <h4>Mechanic is bringing car parts to repair and may carry the car out if repairs are not completed.</h4>
                    </div>
                </div>
                <hr className= {styles.divider}/>
                <p className= {styles.visitorTrue}><b>Does this match the visitor?</b></p>
                <div className= {styles.buttonGroup}>
                    <button className= {styles.entry}>Verify Entry</button>
                    <button className= {styles.manually}>Verify Manually</button>
                </div>
                    </div>
                </div>
            } */}

            { showDetails && 
                <div className= {styles.codeModal}>
                    
                    <div className= {styles.details}>
                        <svg width="65" height="69" viewBox="0 0 65 69" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.416 54.0832C20.4721 50.8263 24.826 49.1215 29.1878 49.0838M35.7493 34.0832C35.7493 37.7651 32.8116 40.7498 29.1878 40.7498C25.564 40.7498 22.6263 37.7651 22.6263 34.0832C22.6263 30.4013 25.564 27.4165 29.1878 27.4165C32.8116 27.4165 35.7493 30.4013 35.7493 34.0832Z" stroke="#003883" strokeWidth="1.5" strokeLinecap="round"/>
                            <path d="M20.75 7.42041C11.9354 7.45326 7.22002 7.76148 4.16709 10.6537C0.75 13.891 0.75 19.1012 0.75 29.5218V45.3112C0.75 55.7318 0.75 60.942 4.16709 64.1793C7.58418 67.4165 13.0839 67.4165 24.0833 67.4165H30.75M37.4167 7.42041C46.2313 7.45326 50.9466 7.76148 53.9996 10.6537C57.4167 13.891 57.4167 19.1012 57.4167 29.5218V32.4165" stroke="#003883" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
                            <path d="M21.6572 6.18878C21.977 4.80608 22.1369 4.11472 22.444 3.55013C23.1595 2.23485 24.4793 1.26827 26.0548 0.905655C26.7311 0.75 27.5152 0.75 29.0833 0.75C30.6515 0.75 31.4355 0.75 32.1118 0.905655C33.6874 1.26827 35.0072 2.23485 35.7226 3.55013C36.0297 4.11472 36.1897 4.80608 36.5095 6.18878L36.7871 7.38918C37.3544 9.84146 37.638 11.0676 37.2101 12.0108C36.933 12.6217 36.4608 13.1447 35.8533 13.5137C34.9154 14.0833 33.5248 14.0833 30.7437 14.0833H27.423C24.6418 14.0833 23.2513 14.0833 22.3134 13.5137C21.7059 13.1447 21.2337 12.6217 20.9566 12.0108C20.5287 11.0676 20.8123 9.84146 21.3795 7.38918L21.6572 6.18878Z" stroke="#003883" strokeWidth="1.5"/>
                            <path d="M46.6278 54.8879C46.254 54.7095 45.8063 54.868 45.628 55.2419C45.4496 55.6157 45.6081 56.0634 45.982 56.2417L46.3049 55.5648L46.6278 54.8879ZM49.2679 58.5278L48.6217 58.9085C48.7623 59.1472 49.0232 59.289 49.3 59.2771C49.5769 59.2652 49.8246 59.1017 49.9443 58.8517L49.2679 58.5278ZM55.5493 51.7808C55.914 51.5844 56.0505 51.1296 55.8542 50.7649C55.6578 50.4001 55.203 50.2636 54.8383 50.46L55.1938 51.1204L55.5493 51.7808ZM64.0827 54.0833H63.3327C63.3327 61.0329 57.6989 66.6667 50.7493 66.6667V67.4167V68.1667C58.5274 68.1667 64.8327 61.8613 64.8327 54.0833H64.0827ZM50.7493 67.4167V66.6667C43.7998 66.6667 38.166 61.0329 38.166 54.0833H37.416H36.666C36.666 61.8613 42.9713 68.1667 50.7493 68.1667V67.4167ZM37.416 54.0833H38.166C38.166 47.1337 43.7998 41.5 50.7493 41.5V40.75V40C42.9713 40 36.666 46.3053 36.666 54.0833H37.416ZM50.7493 40.75V41.5C57.6989 41.5 63.3327 47.1337 63.3327 54.0833H64.0827H64.8327C64.8327 46.3053 58.5274 40 50.7493 40V40.75ZM46.3049 55.5648C45.982 56.2417 45.9817 56.2416 45.9815 56.2415C45.9814 56.2415 45.9812 56.2414 45.9811 56.2413C45.9808 56.2412 45.9805 56.241 45.9803 56.2409C45.9799 56.2407 45.9795 56.2405 45.9792 56.2404C45.9787 56.2402 45.9786 56.2401 45.9789 56.2403C45.9795 56.2405 45.9816 56.2416 45.9852 56.2434C45.9924 56.2471 46.0056 56.2539 46.0242 56.2639C46.0616 56.284 46.1206 56.3171 46.1975 56.3642C46.3513 56.4585 46.5754 56.6081 46.8382 56.8209C47.3639 57.2467 48.0403 57.9217 48.6217 58.9085L49.2679 58.5278L49.914 58.1471C49.2256 56.9786 48.4205 56.1721 47.7822 55.6552C47.463 55.3967 47.1844 55.2097 46.9811 55.0852C46.8794 55.0229 46.7963 54.976 46.736 54.9436C46.7059 54.9273 46.6815 54.9147 46.6633 54.9054C46.6542 54.9008 46.6466 54.8971 46.6407 54.8941C46.6377 54.8927 46.6352 54.8914 46.633 54.8904C46.632 54.8899 46.631 54.8894 46.6301 54.889C46.6297 54.8888 46.6293 54.8886 46.6289 54.8884C46.6287 54.8883 46.6284 54.8882 46.6283 54.8881C46.6281 54.888 46.6278 54.8879 46.3049 55.5648ZM49.2679 58.5278C49.9443 58.8517 49.9442 58.8518 49.9442 58.8519C49.9442 58.8519 49.9442 58.852 49.9442 58.8519C49.9442 58.8519 49.9443 58.8518 49.9443 58.8516C49.9445 58.8512 49.9449 58.8505 49.9454 58.8494C49.9464 58.8473 49.9481 58.8439 49.9504 58.8391C49.9551 58.8295 49.9623 58.8148 49.972 58.795C49.9914 58.7556 50.0208 58.6965 50.0597 58.62C50.1374 58.467 50.2529 58.2448 50.4016 57.972C50.6996 57.4257 51.129 56.6805 51.655 55.8844C52.7293 54.2581 54.1244 52.5479 55.5493 51.7808L55.1938 51.1204L54.8383 50.46C53.0589 51.4179 51.491 53.4113 50.4034 55.0575C49.8485 55.8976 49.3973 56.6808 49.0847 57.2539C48.9283 57.5408 48.8061 57.776 48.7225 57.9404C48.6806 58.0227 48.6485 58.0874 48.6265 58.132C48.6155 58.1544 48.607 58.1717 48.6011 58.1838C48.5982 58.1898 48.5959 58.1945 48.5943 58.1979C48.5935 58.1995 48.5929 58.2009 48.5924 58.2019C48.5921 58.2024 48.5919 58.2028 48.5918 58.2031C48.5917 58.2033 48.5916 58.2034 48.5916 58.2035C48.5915 58.2037 48.5914 58.2038 49.2679 58.5278Z" fill="#003883"/>
                        </svg>
                        <h4 className= {styles.visitorStatus}>Visitor Checked in Succesfully.</h4>
                        <div className= {styles.buttonGroup2}>
                            <button className= {styles.entry} onClick={()=>{setShowDetails(false)}}>Go Back</button>
                            <button className= {styles.manually}>See Recent Logs</button>
                        </div>
                    </div>

                </div>
            }

        </div>
    )
}